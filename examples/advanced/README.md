# Advanced Usage Example

This example demonstrates advanced features of the OpenAPI NestJS Generator including:

- Multiple OpenAPI specifications
- Custom templates
- Vendor extensions
- Complex configuration
- File watching
- Custom validation
- Error handling

## Project Structure

```
advanced/
├── README.md
├── package.json
├── openapi.config.ts
├── specs/
│   ├── common/
│   │   ├── errors.yaml
│   │   └── pagination.yaml
│   ├── user/
│   │   └── user.openapi.yaml
│   ├── product/
│   │   └── product.openapi.yaml
│   └── order/
│       └── order.openapi.yaml
├── templates/
│   ├── controller.hbs
│   ├── dto.hbs
│   └── service.hbs
├── src/
│   ├── app.module.ts
│   ├── main.ts
│   ├── common/
│   │   ├── filters/
│   │   ├── interceptors/
│   │   └── validators/
│   ├── modules/
│   │   ├── user/
│   │   ├── product/
│   │   └── order/
│   └── generated/          # Generated by the tool
│       ├── controllers/
│       ├── dtos/
│       └── services/
└── tsconfig.json
```

## Features Demonstrated

### 1. Multiple OpenAPI Specifications
- Separate specs for different domains (user, product, order)
- Shared common schemas for errors and pagination
- Cross-references between specifications

### 2. Custom Templates
- Custom Handlebars templates for controllers and DTOs
- Additional service template generation
- Custom decorators and patterns

### 3. Vendor Extensions
- Custom controller naming with `x-controller-name`
- Service generation with `x-generate-service`
- Custom validation with `x-validation-rules`

### 4. Advanced Configuration
- TypeScript configuration file
- Environment-specific settings
- Custom generator options

### 5. File Watching
- Automatic regeneration on spec changes
- Hot reload during development
- Incremental updates

## Setup

1. Install dependencies:
```bash
npm install
```

2. Generate code from OpenAPI specs:
```bash
npm run generate
```

3. Start development with file watching:
```bash
npm run dev
```

## Configuration Features

The advanced configuration demonstrates:

- TypeScript configuration file
- Environment variables
- Custom template directory
- Vendor extension mappings
- Generator options
- Output customization

## Custom Templates

The example includes custom Handlebars templates that:

- Generate additional service classes
- Add custom decorators
- Include business logic placeholders
- Support vendor extensions

## Error Handling

Advanced error handling includes:

- Global exception filters
- Custom validation pipes
- Structured error responses
- Logging and monitoring

## Testing

The example includes comprehensive testing:

```bash
# Run unit tests
npm run test

# Run integration tests
npm run test:e2e

# Run tests with coverage
npm run test:cov
```

## API Documentation

The generated API includes:

- Swagger/OpenAPI documentation
- Interactive API explorer
- Schema validation
- Example requests/responses

Access the documentation at: http://localhost:3000/api

## Production Considerations

The example demonstrates:

- Environment configuration
- Security best practices
- Performance optimizations
- Monitoring and logging
- Docker containerization